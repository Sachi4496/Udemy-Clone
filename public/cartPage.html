<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Udemy</title>
    <link rel="stylesheet" href="style.css">
    <script src='./scripts/navbar.js'></script>
    <script src="./scripts/searchFunction.js"></script>
</head>
 <style>
   
    
    #courseCart{
        margin-left: 250px;
        margin-top: 40px;
        font-size: 20px;
    }
    #cart{
        width: 80%;
        height: 400px;
        border-radius: gray solid 2px;
    }
 </style>

<body>
    
    <div id="navbar"></div>

    <div class="w-full bg-black flex" >
        <div class="font-bold text-5xl text-white py-12 pl-60">Shopping Cart</div>
    </div>
    <div id="courseCart" class="">Courses in Cart</div>
    <div id="cart"> 
        <div id="cart_items">
      
        </div>   
    </div>
    <p id = "coursenum"></p>
    

    <div id="total"></div>
</body>

</html>
<script type='module'>
    import navbar from './components/header.js';

    let promise = new Promise((resolve, reject) => {
        let header = document.getElementById('navbar');

        header.innerHTML = navbar();

        resolve('Navbar imported');
    });
    promise.then((res) => {
        // console.log( res );
        addFunctionalityToNavbar();
        // console.log( 'done' );
    })


</script>
<script>
     var total = 0;
    let cart = JSON.parse(localStorage.getItem("decData"));
    console.log("----",cart);

    if(cart == null){
       var div =  document.getElementById("cart_items")
       div.setAttribute("class", "cart_item")
       
       var img = document.createElement("img")
       img.src = "https://s.udemycdn.com/browse_components/flyout/empty-shopping-cart-v2.jpg"
       var para = document.createElement("p")
       para.textContent = "Your cart is empty. Keep shopping to find a course"

       var button = document.createElement("button")
       button.textContent = "Keep shopping"


       button.setAttribute("class", "buttons")
       var link = document.createElement("a")
       link.href = "home_page.html"
       link.append(button)
       

       div.append(img,para,link)
       var p_item = document.getElementById("coursenum")
       p_item.textContent = `${total} Courses in the cart`
    }else{

        add(cart);
    
    }
    function add(data) {
    // console.log("hii"+data);
    var d =  document.getElementById("cart_items");
    
    data.forEach((el) => {
        

        let div = document.createElement("div");
        let img = document.createElement("img");
        img.src = el.image;

        let p = document.createElement("p");
        p.innerText = el.name;


        let price = document.createElement("p");
        price.innerText = el.price;

        div.append(img,p,price);
        d.append(div)


    });
   
}
</script>